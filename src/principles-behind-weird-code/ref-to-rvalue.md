## 右值取地址

先看一段极其简单的代码:
```rust
fn main() {
    println!("{:p}", &34);
}
```

这段代码中直接对右值34取了地址，然后打印出该地址，初看没什么，但是用过C++的同学就知道，这么做在C++中是行不通的。

## 什么原理

其实很简单，编译器把`&34`转变成了以下语句:

```rust
fn main() {
    const THIRTY_FOUR: i32 = 34;
    println!("{:p}", &THIRTY_FOUR);
}

fn main() {
    let thirty_four = 34;
    println!("{:p}", &thirty_four);
}
```

也就是，先赋值给一个变量或者常量，然后再打印出来。

实际上下面的代码也可以：
```rust
println!("{:p}", &rand());
```

同样的，编译器会自动增加一行：`let r = rand(); println!("{:p}", &r);`, 但是，该地址只在当前表达式范围内有效，因此假如你有一个函数`foo(&rand())`并且希望这个函数返回函数参数的引用，这样是无法通过编译的。